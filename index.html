<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Thiago Gualberto - Product Designer</title>
    <link rel="stylesheet" href="css/style.css">
  </head>

  <body> 
    <h1>teste gsap</h1>

          <div class="grid page-transition">
            <div class="zero">um
              <button >teste</button>
            </div>
            <div class="zero"><a id="button" href="http://www.google.com">dois</a></div>
            <div class="zero">trÃªs</div>
            <div class="zero">QUATRO</div>
            <div class="zero">quinto</div>
            <div class="zero">sexta</div>
          </div>

            <div class="page-transition__red"></div>
            <div class="page-transition__black"></div>
            <div class="transition__logo"> I'M LOGO</div>



      <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
      <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/CSSRulePlugin3.min.js"></script>
      <script>

          const $logo = document.querySelector('.transition__logo');
          const $frameBlack = document.querySelector('.page-transition__black');
          const $frameRed = document.querySelector('.page-transition__red');
          const $button = document.querySelector('#button');

          let tltransition = new TimelineMax({paused:true})
            .fromTo($frameRed , 2.2, {scaleX: 0},{scaleX: 1, transformOrigin:'left', ease: Power4.easeInOut},)
            .fromTo($frameBlack , 2.2, {scaleX: 0},{scaleX: 1, transformOrigin:'left', ease: Power4.easeInOut},.2)
            .fromTo($logo , 1.6, {xPercent: -100, autoAlpha:0 },{xPercent: 0, autoAlpha:1, ease: Power4.easeInOut},.7)
            .set($frameRed, {scaleX:0})
            .to($frameBlack , 2.2, {scaleX: 0, transformOrigin:'right', ease: Power4.easeInOut})
            .to($logo , .2, {autoAlpha:0 },'-=1.2')
            $button.addEventListener('click', () => {
            tltransition.play(0);
          });
</script>


<script>
        let links = document.querySelectorAll('a');
          if (links){
            links.forEach ((link) => {
              links.onClick = (e)  => {
                let.body = document.querySelector('body');
                e.preventDefault();
                setTimeout(function () {
                  if(body.classList.contains('fade-out')) {
                    console.log("navigation..");
                      if (!e.srcElement.parent.parentElement.href) {
                         window.location = e.srcElement.href;
                      } else {
                        window.location = e.srcElement.parentElement.href;;
                      }
                    } else {
                      console.log('whoops' , e.srcElement);
                    }
                    }, 2000);
                      body.classList.add('fade-out');
                    }
                  });
                }
</script>

  </body>
</html>